# 拼好拼业务数据看板需求文档

## 项目概述

拼好拼是一个多层级合伙人制的线下支付平台，通过发展合伙人→商务→商户的业务链条，为线下实体门店提供收款服务，并建立了完整的分红体系。本项目旨在为公司管理层提供一个实时、动态、美观的业务数据看板，全面展示平台的运营状况和分红情况。

## 业务背景

### 业务模式
- **组织架构**：平台 → 合伙人（省/市/区县）→ 商务人员 → 线下商户
- **合伙人等级**：每个行政层级都有5GP/4GP/3GP/2GP/LP五个等级
- **收益模式**：商户使用收款码，设定让利比例，平台抽成，商户T+1到账
- **积分机制**：每笔消费商户和消费者都获得消费点，作为分红凭据
- **分红触发**：分红池每递增15%触发一次分红

### 分红规则
- **参与角色**：商户、用户、合伙人、商务
- **用户分红上限**：每笔消费最多40次分红或不超过5倍本金
- **商务激励**：发展商户获得该商户分红的5%，发展下级商务获得其收益的5%

## 需求分析

### 1. 业务概览需求

**用户故事：** 作为公司管理层，我希望能够快速了解全国业务的整体运营状况，以便做出战略决策。

#### 验收标准
1. WHEN 用户打开看板 THEN 系统 SHALL 显示全国业务核心KPI指标
2. WHEN 用户查看概览数据 THEN 系统 SHALL 展示实时更新的交易金额、活跃商户数、用户数等关键指标
3. WHEN 数据发生重大变化 THEN 系统 SHALL 提供异常预警提示
4. IF 用户需要快速了解业务健康度 THEN 系统 SHALL 显示商户留存率、用户复购率等健康度指标

### 2. 分红数据监控需求

**用户故事：** 作为公司管理层，我希望实时监控分红池状态和各角色的分红情况，以便优化分红策略。

#### 验收标准
1. WHEN 用户查看分红数据 THEN 系统 SHALL 显示当前分红轮次、分红池余额、距离下次分红的进度
2. WHEN 分红池接近触发条件 THEN 系统 SHALL 显示预计分红时间和金额
3. WHEN 用户查看分红分配 THEN 系统 SHALL 按角色展示合伙人、商务、商户、用户的分红明细
4. IF 用户需要分析分红趋势 THEN 系统 SHALL 提供历史分红轮次对比和趋势图表

### 3. 多维度数据筛选需求

**用户故事：** 作为公司管理层，我希望能够从不同维度查看业务数据，以便进行精细化分析。

#### 验收标准
1. WHEN 用户需要查看特定时间段数据 THEN 系统 SHALL 支持实时、日、周、月、季、年及自定义时间范围筛选
2. WHEN 用户需要查看区域数据 THEN 系统 SHALL 支持全国、省、市、区县四级地域钻取
3. WHEN 用户需要查看角色数据 THEN 系统 SHALL 支持按合伙人等级、商务层级、商户类型、用户活跃度筛选
4. WHEN 用户需要查看历史分红 THEN 系统 SHALL 支持按分红轮次筛选和对比

### 4. 地图可视化需求

**用户故事：** 作为公司管理层，我希望通过地图直观地看到各地区的业务分布和表现，以便识别重点区域。

#### 验收标准
1. WHEN 用户查看全国数据 THEN 系统 SHALL 在中国地图上展示各省份的业务热力图
2. WHEN 用户点击省份 THEN 系统 SHALL 钻取到该省的市级地图展示
3. WHEN 用户点击城市 THEN 系统 SHALL 钻取到该市的区县级地图展示
4. IF 某地区数据异常 THEN 系统 SHALL 在地图上用不同颜色标识

### 5. 实时数据展示需求

**用户故事：** 作为公司管理层，我希望看到实时更新的业务数据，以便及时了解业务动态。

#### 验收标准
1. WHEN 有新的交易发生 THEN 系统 SHALL 在30秒内更新相关数据指标
2. WHEN 分红池状态变化 THEN 系统 SHALL 实时更新分红进度条
3. WHEN 有新商户入驻或用户注册 THEN 系统 SHALL 实时更新统计数据
4. IF 系统检测到数据异常 THEN 系统 SHALL 立即显示预警信息

### 6. 数据交互和导出需求

**用户故事：** 作为公司管理层，我希望能够深入分析数据并导出报表，以便进行详细的业务分析。

#### 验收标准
1. WHEN 用户点击图表元素 THEN 系统 SHALL 提供数据钻取功能显示详细信息
2. WHEN 用户需要对比数据 THEN 系统 SHALL 支持同比、环比、多地区、多角色对比分析
3. WHEN 用户需要导出数据 THEN 系统 SHALL 支持Excel、PDF格式导出和图表截图
4. IF 用户需要查看排行榜 THEN 系统 SHALL 提供各角色收益排行榜功能

### 7. 响应式界面需求

**用户故事：** 作为公司管理层，我希望在PC桌面端获得最佳的数据查看体验，界面美观且操作便捷。

#### 验收标准
1. WHEN 用户在不同分辨率的PC上访问 THEN 系统 SHALL 自适应屏幕尺寸保持最佳显示效果
2. WHEN 用户操作界面 THEN 系统 SHALL 提供流畅的交互体验，响应时间不超过2秒
3. WHEN 用户查看大量数据 THEN 系统 SHALL 采用分页或虚拟滚动保证页面性能
4. IF 数据加载时间较长 THEN 系统 SHALL 显示加载进度指示器

### 8. 权限和安全需求

**用户故事：** 作为公司管理层，我希望确保数据安全，只有授权人员才能访问敏感的业务数据。

#### 验收标准
1. WHEN 用户访问看板 THEN 系统 SHALL 要求身份验证
2. WHEN 用户登录成功 THEN 系统 SHALL 根据用户角色显示相应的数据权限
3. WHEN 用户操作敏感功能 THEN 系统 SHALL 记录操作日志
4. IF 检测到异常访问 THEN 系统 SHALL 触发安全预警机制