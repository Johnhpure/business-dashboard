# 交互行为说明文档

## 页面加载交互行为

### 1. 初始加载序列

#### 页面进入动画
**触发条件：** 用户首次访问页面或刷新页面
**交互流程：**
1. 页面背景立即显示深色主题背景
2. 背景粒子动画开始执行（持续动画）
3. 页面组件按顺序淡入显示：
   - 头部导航栏（延迟0ms）
   - KPI卡片区域（延迟100ms）
   - 图表区域（延迟200ms）
   - 排行榜区域（延迟300ms）

**动画参数：**
- 淡入动画时长：300ms
- 缓动函数：ease-out
- 上移距离：30px
- 透明度变化：0 → 1

#### 数据加载状态
**触发条件：** 页面初始化时数据获取
**交互流程：**
1. 显示骨架屏加载效果
2. KPI卡片显示占位符内容
3. 图表区域显示加载动画
4. 数据获取完成后执行数据填充动画

**加载状态样式：**
```css
.skeleton-loading {
    background: linear-gradient(90deg, 
        rgba(255,255,255,0.1) 25%, 
        rgba(255,255,255,0.2) 50%, 
        rgba(255,255,255,0.1) 75%);
    background-size: 200% 100%;
    animation: skeleton-wave 1.5s infinite;
}
```

## KPI卡片交互行为

### 1. 悬停交互

#### 卡片悬停效果
**触发条件：** 鼠标悬停在KPI卡片上
**交互流程：**
1. 卡片向上移动2px
2. 阴影增强效果
3. 顶部装饰条发光效果
4. 数字轻微放大（scale: 1.02）

**动画参数：**
- 动画时长：300ms
- 缓动函数：ease
- 变换属性：transform, box-shadow
- 发光颜色：对应卡片主题色

**CSS实现：**
```css
.kpi-card:hover {
    transform: translateY(-2px);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(0, 212, 255, 0.2);
    transition: all 0.3s ease;
}

.kpi-card:hover .kpi-value .number {
    transform: scale(1.02);
}
```

#### 数字动画效果
**触发条件：** 数据更新或页面加载完成
**交互流程：**
1. 数字从0开始递增到目标值
2. 递增速度先快后慢（缓动效果）
3. 趋势箭头淡入显示
4. 百分比数字同步动画

**动画参数：**
- 动画时长：1500ms
- 缓动函数：ease-out
- 数字格式化：千分位分隔符
- 小数位数：根据数据类型确定

### 2. 点击交互

#### 卡片点击反馈
**触发条件：** 用户点击KPI卡片
**交互流程：**
1. 卡片轻微缩放（scale: 0.98）
2. 波纹效果从点击位置扩散
3. 卡片详情模态框弹出
4. 背景模糊效果

**波纹效果参数：**
- 初始大小：0px
- 最终大小：200px
- 动画时长：600ms
- 透明度变化：0.3 → 0

## 图表交互行为

### 1. 收入趋势图交互

#### 数据点悬停
**触发条件：** 鼠标悬停在折线图数据点上
**交互流程：**
1. 数据点放大显示（半径增加2px）
2. 显示悬停提示框
3. 垂直辅助线显示
4. 相关数据高亮

**提示框内容：**
- 日期信息
- 具体数值
- 增长率信息
- 对比数据

**CSS样式：**
```css
.chart-tooltip {
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 8px 12px;
    color: white;
    font-size: 12px;
    backdrop-filter: blur(10px);
}
```

#### 图表缩放交互
**触发条件：** 鼠标滚轮在图表区域滚动
**交互流程：**
1. 检测滚轮方向
2. 计算缩放比例
3. 更新图表视图范围
4. 平滑过渡动画

**缩放参数：**
- 最小缩放：50%
- 最大缩放：200%
- 缩放步长：10%
- 动画时长：300ms

### 2. 分红饼图交互

#### 扇形悬停效果
**触发条件：** 鼠标悬停在饼图扇形上
**交互流程：**
1. 扇形向外偏移（offset: 10px）
2. 扇形颜色加深
3. 显示数据标签
4. 图例对应项高亮

**动画参数：**
- 偏移距离：10px
- 动画时长：200ms
- 颜色变化：原色 → 加深20%

#### 扇形点击交互
**触发条件：** 用户点击饼图扇形
**交互流程：**
1. 扇形进一步偏移（offset: 20px）
2. 显示详细数据面板
3. 其他扇形透明度降低
4. 相关数据联动更新

### 3. 地图可视化交互

#### 省份悬停效果
**触发条件：** 鼠标悬停在地图省份上
**交互流程：**
1. 省份区域高亮显示
2. 边框颜色变为主题色
3. 显示省份数据提示框
4. 省份名称放大显示

**高亮样式：**
```css
.map-province:hover {
    fill: rgba(0, 212, 255, 0.3);
    stroke: #00d4ff;
    stroke-width: 2px;
    filter: brightness(1.2);
}
```

#### 省份点击交互
**触发条件：** 用户点击地图省份
**交互流程：**
1. 省份区域选中状态
2. 地图视图缩放到省份
3. 显示省份详细数据
4. 相关图表数据筛选

## 排行榜交互行为

### 1. 排行项悬停效果

#### 排行项高亮
**触发条件：** 鼠标悬停在排行榜项目上
**交互流程：**
1. 排行项背景颜色加深
2. 排行项向右移动4px
3. 边框颜色变为主题色
4. 排名徽章发光效果

**动画参数：**
- 移动距离：4px
- 动画时长：200ms
- 背景色变化：rgba(255,255,255,0.02) → rgba(255,255,255,0.05)

#### 排名徽章特效
**触发条件：** 悬停在前三名排行项上
**交互流程：**
1. 金牌徽章：金色光晕效果
2. 银牌徽章：银色光晕效果
3. 铜牌徽章：铜色光晕效果
4. 徽章轻微旋转动画

**光晕效果CSS：**
```css
.ranking-number.top-1:hover {
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
    animation: glow-gold 1s ease-in-out infinite alternate;
}

@keyframes glow-gold {
    from { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); }
    to { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
}
```

### 2. 排行榜滚动交互

#### 无限滚动加载
**触发条件：** 滚动到排行榜底部
**交互流程：**
1. 检测滚动位置
2. 触发数据加载
3. 显示加载指示器
4. 新数据淡入显示

**加载指示器：**
- 旋转加载图标
- 加载文字提示
- 进度条显示
- 加载完成反馈

## 筛选器交互行为

### 1. 时间筛选器

#### 下拉菜单交互
**触发条件：** 点击时间筛选下拉框
**交互流程：**
1. 下拉箭头旋转180度
2. 选项列表向下展开
3. 选项项悬停高亮
4. 点击选项后收起菜单

**展开动画：**
- 动画时长：200ms
- 缓动函数：ease-out
- 变换属性：height, opacity
- 最大高度：200px

#### 时间范围切换
**触发条件：** 选择不同时间范围选项
**交互流程：**
1. 选项高亮显示
2. 下拉框显示选中值
3. 触发数据重新加载
4. 所有图表同步更新

### 2. 地区筛选器

#### 级联选择交互
**触发条件：** 选择省份或城市
**交互流程：**
1. 省份选择触发城市列表更新
2. 城市选项动态加载
3. 地图视图同步更新
4. 相关数据筛选

**级联动画：**
- 选项淡出：100ms
- 新选项淡入：200ms
- 加载状态：旋转图标
- 完成状态：勾选图标

## 响应式交互行为

### 1. 移动端触摸交互

#### 触摸手势支持
**单击手势：**
- 触发元素点击事件
- 显示触摸反馈动画
- 300ms延迟防误触

**长按手势：**
- 触发上下文菜单
- 振动反馈（支持设备）
- 长按时长：500ms

**滑动手势：**
- 水平滑动：切换图表
- 垂直滑动：滚动内容
- 滑动阈值：30px

#### 移动端菜单交互
**触发条件：** 点击移动端菜单按钮
**交互流程：**
1. 汉堡菜单图标变为X图标
2. 侧边菜单从右侧滑入
3. 主内容区域向左偏移
4. 背景添加遮罩层

**菜单动画：**
- 滑入时长：300ms
- 缓动函数：ease-out
- 滑入距离：100%
- 遮罩透明度：0 → 0.5

### 2. 平板端交互适配

#### 触摸优化
**按钮尺寸：** 最小44px × 44px
**间距调整：** 增加触摸间距
**手势识别：** 支持多点触控
**滚动优化：** 惯性滚动支持

## 键盘导航交互

### 1. 焦点管理

#### Tab键导航
**导航顺序：**
1. 头部导航链接
2. 时间筛选器
3. 地区筛选器
4. KPI卡片
5. 图表控件
6. 排行榜项目

**焦点样式：**
```css
.focusable:focus {
    outline: 2px solid #00d4ff;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.2);
}
```

#### 键盘快捷键
**支持快捷键：**
- `Tab`: 下一个焦点
- `Shift + Tab`: 上一个焦点
- `Enter`: 激活元素
- `Space`: 选择/取消选择
- `Esc`: 关闭模态框
- `Arrow Keys`: 导航选项

### 2. 无障碍支持

#### 屏幕阅读器支持
**ARIA标签：**
- `aria-label`: 元素描述
- `aria-describedby`: 详细描述
- `aria-expanded`: 展开状态
- `aria-selected`: 选中状态

**语义化标签：**
- `<main>`: 主要内容区域
- `<section>`: 内容区块
- `<article>`: 独立内容
- `<nav>`: 导航区域

## 错误状态交互

### 1. 网络错误处理

#### 连接失败提示
**触发条件：** 网络请求失败
**交互流程：**
1. 显示错误提示框
2. 提供重试按钮
3. 显示错误详情
4. 自动重试机制

**错误提示样式：**
```css
.error-toast {
    background: rgba(239, 68, 68, 0.9);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 8px;
    padding: 12px 16px;
    color: white;
    animation: slideInDown 0.3s ease;
}
```

#### 数据加载失败
**触发条件：** 数据获取失败
**交互流程：**
1. 显示占位符内容
2. 显示重新加载按钮
3. 错误信息提示
4. 降级显示缓存数据

### 2. 表单验证交互

#### 输入验证反馈
**触发条件：** 用户输入无效数据
**交互流程：**
1. 输入框边框变红
2. 显示错误提示信息
3. 震动动画效果
4. 焦点保持在错误字段

**验证动画：**
```css
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.input-error {
    animation: shake 0.5s ease-in-out;
    border-color: #ef4444;
}
```

## 性能优化交互

### 1. 防抖和节流

#### 搜索输入防抖
**触发条件：** 用户在搜索框输入
**防抖延迟：** 300ms
**实现逻辑：** 延迟执行搜索请求

#### 滚动事件节流
**触发条件：** 页面滚动事件
**节流间隔：** 16ms（60fps）
**实现逻辑：** 限制滚动处理频率

### 2. 虚拟滚动交互

#### 长列表优化
**触发条件：** 排行榜数据超过100项
**交互流程：**
1. 计算可视区域
2. 只渲染可见项目
3. 滚动时动态更新
4. 保持滚动位置

**虚拟滚动参数：**
- 项目高度：60px
- 缓冲区域：5项
- 更新阈值：3项
- 滚动平滑度：60fps

这份交互行为说明文档详细记录了HTML Dashboard项目中所有用户交互行为、系统响应、动画效果和性能优化措施，为React迁移提供了完整的交互行为参考标准。